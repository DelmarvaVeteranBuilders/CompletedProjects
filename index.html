<!doctype html>

<!-- Coded by Meghan Murphy
		-->

<html>
	<head>
		<meta charset="utf-8">
		
		<title>Delmarva Veteran Builders</title>
			
		<!-- Stylesheets -->
		<link rel="stylesheet" href="./Leaflet-1.2.0/leaflet.css"/>
		<link rel="stylesheet" href="./src/styles/css.css"/>				
		<link rel="stylesheet" href="./src/styles/leaflet.groupedlayercontrol.min.css"/>
		<script src="./Leaflet-1.2.0/leaflet.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<script src="./src/styles/leaflet.groupedlayercontrol.min.js"></script>
		
		<!-- Javascript -->
		<script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
		<script src="./src/js/bing_js/leaflet-bing-layer.js"></script>
				
		<!-- GeoJSON overlays -->
		<script src="./src/js/dvb.js"></script>
		<script src="./src/js/tester.js"></script>
		<script src="./src/js/counties.js"></script>
	
	</head>
		<body>
			
			<script>
/////////////FUNCTION///////////////////////////////////////////////////////////////////////////////////////////////////////////
			//zoom to feature function
				function zoomToFeature(e){
					var latLngs = [e.target.getLatLng()];
					var markerBounds = L.latLngBounds(latLngs);
					map.fitBounds(markerBounds);
					}
			
			//tie zoom feature to access layer names
				function onEachFeature(feature, layer) {
					layer.on( {
						click: zoomToFeature
					});
					}
				
			</script>	

			<div id="map"></div>
			
			<script>
/////////////JS FILES///////////////////////////////////////////////////////////////////////////////////////////////////////////			
			
			//Calling GeoJSON file and their embedded styles from js
			a = L.geoJson(dvb, {
							onEachFeature: onProject}),
						
			
			b = L.geoJson(tester, {
					onEachFeature: function(feature, layer){
						popupOptions = {maxWidth: 350, maxHeight: 200};
						layer.bindPopup('<b>' + feature.properties.Name + "</b>" +
										"<br></br><b>Address: </b>" + feature.properties.Address +
										"<br></br><b>Project Type: </b>" + feature.properties.Project_Type +
										"<br></br><b>Construction Began: </b>" + feature.properties.Construction_Began +
										"<br></br><b>Construction Ended: </b>" + feature.properties.Construction_Ended +
										"<br></br><b>Square Footage: </b>" + feature.properties.Square_Footage +
										"<br></br><b>Property Land Area: </b>" + feature.properties.Property_Land_Area +
										"<br></br><b>Exterior: </b>" + feature.properties.Exterior +
										"<br></br><b>Value: </b>" + feature.properties.Value +
										"<br></br><b>Zoning Code: </b>" + feature.properties.Zoning_Code +
										"<br></br><b>Land Use Code: </b>" + feature.properties.Land_Use_Code +
										"<br></br><b>Construction Grade Code: </b>" + feature.properties.Construction_Grade_Code +
										"<br></br><b>Construction Code: </b>" + feature.properties.Construction_Code +
										"<br></br><b>Building Style Code: </b>" + feature.properties.Building_Style_Code ,
						popupOptions);
						}
						}),
			
			c = L.geoJson(counties, {
								style: countiesStyle});
			
			// Assigning variables to layers for control	
			var aShp = L.layerGroup([a]) // DVB Completed Projects
				
				bShp = L.layerGroup([b]) // tester pop-up options
			
				cShp = L.layerGroup([c]) //counties of MD, DE, VA

/////////////BASE MAPS///////////////////////////////////////////////////////////////////////////////////////////////////////////			
			
			//BaseMap image options
			var OpenStreetMap_Mapnik = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
				minZoom: 7,
				attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
				
			});
			
			var Esri_WorldTopoMap = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {
				minZoom: 7,
				attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community'
			});
			
			var BING_KEY = 'Av7tV7Y4URiDxSp68gEm8ebOAA3SpY7NRt9gCEahW8gUjCao1AigHsbqMO15JJvu'
			var bingLayer = L.tileLayer.bing(BING_KEY, {
				minZoom: 7
			});
			
			//create basemaps variable to call within the control
			var baseMaps = {
				"Topography": Esri_WorldTopoMap,
				"Streets": OpenStreetMap_Mapnik,
				"Bing<sup>TM</sup> Aerial": bingLayer
			};

/////////////ADD TO MAP///////////////////////////////////////////////////////////////////////////////////////////////////////////
			
			//all layers that can be turned on and off
			var overLays = {
				"Completed Projects": aShp,
				"Tester Pop-Up": bShp,
				"Counties": cShp
			};
			
			//set map extent, view, and default layer
			var map = L.map('map', {
				layers: [Esri_WorldTopoMap, bShp]
				}).setView([38.373322, -75.571778], 8);
			
			//add basemaps and layers to the leaflet map
			L.control.layers(baseMaps, overLays).addTo(map);
			
			</script>
			
		</body>


			
			
			
